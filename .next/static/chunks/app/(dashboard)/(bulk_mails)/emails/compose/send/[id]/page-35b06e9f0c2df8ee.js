(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1199],{64199:function(e,t,r){Promise.resolve().then(r.bind(r,56447))},56447:function(e,t,r){"use strict";var n=r(57437),s=r(80670),a=r(29501),o=r(68245),i=r(12381);r(2265);var l=r(88231),c=r(94242);t.default=function(e){let{data:t,composeId:r}=e,d=null==t?void 0:t.data,u=(0,a.cI)();async function m(e){let t=Object.entries(e).filter(e=>{let[t,r]=e;return t.startsWith("group-")&&!0===r}).map(e=>{let[t]=e;return Number(t.replace("group-",""))}),n=[];for(let e of t){let t=l.Z.post("/api/mails/v1/emails/send/",{group:e,email_compose:r});n.push(t)}try{let e=await Promise.allSettled(n);console.log(e);let t=e.filter(e=>"fulfilled"===e.status),r=e.filter(e=>"rejected"===e.status);c.toast.success("".concat(t.length," requests have been made to send emails!")),r.length>0?c.toast.warn("".concat(r.length," requests failed!}")):(u.reset(),u.clearErrors())}catch(e){var s,a;console.log(e),c.toast.error((null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Something went wrong")}}return(0,n.jsxs)("div",{className:"shadow-md rounded-md p-4 border",children:[(0,n.jsxs)("div",{className:" mb-4",children:[(0,n.jsx)("h4",{className:"text-center font-bold text-3xl",children:"Send email"}),(0,n.jsx)("p",{className:"text-center",children:"Send email of this compose to multiple groups"})]}),(0,n.jsx)(s.l0,{...u,children:(0,n.jsx)("form",{onSubmit:u.handleSubmit(m),onReset:function(){u.reset(),u.clearErrors()},className:"space-y-8 @container",children:(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[null==d?void 0:d.map(e=>(0,n.jsx)(s.Wi,{control:u.control,name:"group-".concat(e.id),render:t=>{let{field:r}=t;return(0,n.jsxs)(s.xJ,{className:"col-span-12 col-start-auto flex self-end flex-col gap-2 space-y-0 items-start",children:[(0,n.jsx)(s.lX,{className:"hidden shrink-0",children:e.name}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(s.NI,{children:(0,n.jsxs)(s.lX,{className:"border-0 p-0 w-full flex items-start has-[[data-state=checked]]:border-primary",htmlFor:"group-".concat(e.id),children:[(0,n.jsx)(o.X,{id:"group-".concat(e.id),className:"",...r,checked:r.value,onCheckedChange:r.onChange}),(0,n.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,n.jsx)(s.lX,{children:e.name}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})]},"checkbox-0")}),(0,n.jsx)(s.zG,{})]})]})}},e.id)),(0,n.jsx)(s.Wi,{control:u.control,name:"reset-button-0",render:e=>{let{field:t}=e;return(0,n.jsxs)(s.xJ,{className:"col-span-6 col-start-auto flex self-end flex-col gap-2 space-y-0 items-start",children:[(0,n.jsx)(s.lX,{className:"hidden shrink-0",children:"Reset"}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(s.NI,{children:(0,n.jsx)(i.z,{id:"reset-button-0",name:"",className:"w-full",type:"reset",variant:"outline",children:"Reset"},"reset-button-0")}),(0,n.jsx)(s.zG,{})]})]})}}),(0,n.jsx)(s.Wi,{control:u.control,name:"submit-button-1",render:e=>{let{field:t}=e;return(0,n.jsxs)(s.xJ,{className:"col-span-6 col-start-auto flex self-end flex-col gap-2 space-y-0 items-start",children:[(0,n.jsx)(s.lX,{className:"hidden shrink-0",children:"Submit"}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(s.NI,{children:(0,n.jsx)(i.z,{id:"submit-button-1",name:"",className:"w-full",type:"submit",variant:"default",children:"Submit"},"submit-button-1")}),(0,n.jsx)(s.zG,{})]})]})}})]})})})]})}},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var n=r(57437),s=r(2265),a=r(37053),o=r(90535),i=r(93448);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-blue-400",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...d})});c.displayName="Button"},68245:function(e,t,r){"use strict";r.d(t,{X:function(){return l}});var n=r(57437),s=r(2265),a=r(9270),o=r(30401),i=r(93448);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,n.jsx)(a.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})});l.displayName=a.fC.displayName},80670:function(e,t,r){"use strict";r.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return c},lX:function(){return x},pf:function(){return g},xJ:function(){return h},zG:function(){return v}});var n=r(57437),s=r(2265),a=r(37053),o=r(29501),i=r(93448),l=r(75060);let c=o.RV,d=s.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(d.Provider,{value:{name:t.name},children:(0,n.jsx)(o.Qr,{...t})})},m=()=>{let e=s.useContext(d),t=s.useContext(f),{getFieldState:r}=(0,o.Gc)(),n=(0,o.cl)({name:e.name}),a=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},f=s.createContext({});function h(e){let{className:t,...r}=e,a=s.useId();return(0,n.jsx)(f.Provider,{value:{id:a},children:(0,n.jsx)("div",{"data-slot":"form-item",className:(0,i.cn)("grid gap-2",t),...r})})}function x(e){let{className:t,...r}=e,{error:s,formItemId:a}=m();return(0,n.jsx)(l._,{"data-slot":"form-label","data-error":!!s,className:(0,i.cn)("data-[error=true]:text-destructive",t),htmlFor:a,...r})}function p(e){let{...t}=e,{error:r,formItemId:s,formDescriptionId:o,formMessageId:i}=m();return(0,n.jsx)(a.g7,{"data-slot":"form-control",id:s,"aria-describedby":r?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!r,...t})}function g(e){let{className:t,...r}=e,{formDescriptionId:s}=m();return(0,n.jsx)("p",{"data-slot":"form-description",id:s,className:(0,i.cn)("text-muted-foreground text-sm",t),...r})}function v(e){var t;let{className:r,...s}=e,{error:a,formMessageId:o}=m(),l=a?String(null!==(t=null==a?void 0:a.message)&&void 0!==t?t:""):s.children;return l?(0,n.jsx)("p",{"data-slot":"form-message",id:o,className:(0,i.cn)("text-destructive text-sm",r),...s,children:l}):null}},75060:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var n=r(57437),s=r(2265),a=r(6394),o=r(90535),i=r(93448);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,i.cn)(l(),r),...s})});c.displayName=a.f.displayName},88231:function(e,t,r){"use strict";var n=r(83464),s=r(40257);let a=n.Z.create({baseURL:s.env.NEXT_PUBLIC_BACKEND_API_URL||"http://localhost:8000",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});t.Z=a},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(61994),s=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}}},function(e){e.O(0,[7317,4242,4311,3464,3080,6496,2971,2117,1744],function(){return e(e.s=64199)}),_N_E=e.O()}]);