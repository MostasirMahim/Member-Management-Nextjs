(()=>{var e={};e.id=6749,e.ids=[6749],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},75217:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(74967),r(6989),r(80774),r(35866),r(27653);var t=r(23191),a=r(88716),i=r(37922),n=r.n(i),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let d=["",{children:["(dashboard)",{children:["groups",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,74967)),"A:\\peopleForTek\\member management backend\\Member-Management-Nextjs\\src\\app\\(dashboard)\\groups\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6989)),"A:\\peopleForTek\\member management backend\\Member-Management-Nextjs\\src\\app\\(dashboard)\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,80774)),"A:\\peopleForTek\\member management backend\\Member-Management-Nextjs\\src\\app\\(dashboard)\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,27653)),"A:\\peopleForTek\\member management backend\\Member-Management-Nextjs\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["A:\\peopleForTek\\member management backend\\Member-Management-Nextjs\\src\\app\\(dashboard)\\groups\\page.tsx"],m="/(dashboard)/groups/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/groups/page",pathname:"/groups",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},20068:(e,s,r)=>{Promise.resolve().then(r.bind(r,82543))},98091:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});let t=(0,r(62881).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},82543:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>G});var t=r(10326),a=r(17577),i=r(35047),n=r(83855),o=r(62881);let l=(0,o.Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var d=r(79635);let c=(0,o.Z)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var m=r(12714),u=r(98091),p=r(91664),x=r(29752),h=r(38443),g=r(55296),f=r(24118),j=r(23703),v=r(41190),b=r(44794),N=r(69654),y=r(3236),w=r(78062),k=r(20762),C=r(44976),A=r(10119),q=r(47769),_=r(84097),z=r(24055);function P({onCancel:e}){let{data:s,isLoading:r}=(0,k.Z)(),a=(0,C.NL)(),{mutate:i,isPending:n}=(0,A.D)({mutationFn:async e=>(await q.Z.post("/api/account/v1/authorization/group_permissions/",e)).data,onSuccess:s=>{s?.status==="success"&&(a.invalidateQueries({queryKey:["getGroups"]}),(0,_.Am)({title:s?.details||"New Group Created",description:s?.message||"New group has been created successfully.",variant:"default"}),o.resetForm(),e())},onError:e=>{console.log("error",e?.response);let{message:s,errors:r,detail:t}=e?.response.data;if(r){let e=Object.values(r).flat().join("\n");(0,_.Am)({title:"Users Added Failed",description:e,variant:"destructive"})}else(0,_.Am)({title:t||"Users Added Failed",description:s||"An error occurred during Added",variant:"destructive"})}}),o=(0,j.TA)({initialValues:{name:"",permissions:[]},validate:e=>{let s={};return e.name.trim()||(s.name="Group name is required"),0===e.permissions.length&&(s.permissions="At least one permission must be selected"),s},onSubmit:async e=>{i({name:e.name,permission:e.permissions})}}),l=(e,s)=>{let r=o.values.permissions;s?o.setFieldValue("permissions",[...r,e]):o.setFieldValue("permissions",r.filter(s=>s!==e))};return r?t.jsx(z.xg,{}):t.jsx("div",{className:"w-full mx-auto",children:(0,t.jsxs)("form",{onSubmit:o.handleSubmit,className:"space-y-2 sm:space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b._,{htmlFor:"name",children:"Group Name"}),t.jsx(v.I,{id:"name",name:"name",value:o.values.name,onChange:o.handleChange,onBlur:o.handleBlur,placeholder:"Enter group name",className:o.touched.name&&o.errors.name?"border-red-500":""}),o.touched.name&&o.errors.name&&t.jsx("p",{className:"text-sm text-red-500",children:o.errors.name})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[t.jsx(b._,{children:"Select Permissions"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(p.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{o.setFieldValue("permissions",s?.map(e=>e.id))},className:"text-xs sm:text-sm bg-transparent",children:"Select All"}),t.jsx(p.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{o.setFieldValue("permissions",[])},className:"text-xs sm:text-sm bg-transparent",children:"Clear All"})]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Selected: ",o.values.permissions.length," of ",s?.length]}),o.touched.permissions&&o.errors.permissions&&t.jsx("p",{className:"text-sm text-red-500",children:o.errors.permissions}),t.jsx(y.ScrollArea,{className:"h-[200px] sm:h-[250px] border rounded-md p-3 sm:p-4",children:t.jsx("div",{className:"space-y-2 sm:space-y-3",children:s?.map(e=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(N.X,{id:e.id,checked:o.values.permissions.includes(e.id),onCheckedChange:s=>l(e.id,s)}),t.jsx(b._,{htmlFor:e.id,className:"text-xs sm:text-sm font-normal cursor-pointer leading-tight",children:e.name})]},e.id))})})]}),t.jsx(w.Z,{}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[t.jsx(p.z,{type:"button",variant:"outline",onClick:e,className:"w-full sm:w-auto bg-transparent",children:"Cancel"}),t.jsx(p.z,{type:"submit",disabled:n,className:"w-full sm:w-auto",children:n?"Creating...":"Create Group"})]})]})})}var F=r(20108);function G(){let e=(0,i.useRouter)(),[s,r]=(0,a.useState)(!1),[o,j]=(0,a.useState)(!1),[v,b]=(0,a.useState)(null),N=(0,C.NL)(),{data:y,isLoading:w}=(0,F.a)({queryKey:["getGroups"],queryFn:async()=>{try{let e=await q.Z.get("/api/account/v2/authorization/group_permissions/");if(e?.data?.status=="success")return e.data.data;return console.error("Failed to fetch groups:",e.data.message),[]}catch(e){return console.error("Error fetching:",e),(0,_.Am)({title:"Error",description:e?.response?.data?.message||"Failed to fetch groups",variant:"destructive"}),[]}}}),{mutate:k,isPending:G}=(0,A.D)({mutationFn:async e=>(await q.Z.delete(`/api/account/v1/authorization/group_permissions/${e}/`)).data,onSuccess:e=>{e?.status==="success"&&(N.invalidateQueries({queryKey:["getGroups"]}),(0,_.Am)({title:e?.details||"Group Removed successfully",description:e?.message||"Group has been successfully Removed.",variant:"default"}),r(!1),b(null))},onError:e=>{console.log("error",e?.response);let{message:s,errors:r,detail:t}=e?.response.data;if(r){let e=Object.values(r).flat().join("\n");(0,_.Am)({title:"Group Removed Failed",description:e,variant:"destructive"})}else(0,_.Am)({title:t||"Group Removed Failed",description:s||"An error occurred during Removed",variant:"destructive"})}}),M=s=>{e.push(`/groups/${s}`)},Z=e=>{b(e),r(!0)};return w||G?t.jsx(z.xg,{}):(0,t.jsxs)("div",{className:" mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"View All Groups"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage user groups and their permissions"})]}),(0,t.jsxs)(p.z,{onClick:()=>j(!0),className:"w-fit",children:[t.jsx(n.Z,{className:"w-4 h-4"}),"Create Group"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y?.map(e=>t.jsxs(x.Zb,{className:"hover:shadow-lg transition-shadow",children:[t.jsxs(x.Ol,{className:"pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(x.ll,{className:"text-lg font-semibold",children:e.name}),t.jsx(l,{className:"w-5 h-5 text-muted-foreground"})]}),t.jsxs(h.C,{variant:"secondary",className:"w-fit",children:["ID: ",e.id]})]}),t.jsxs(x.aY,{className:"space-y-3 my-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(d.Z,{className:"w-4 h-4 text-muted-foreground"}),t.jsxs("span",{className:"text-sm font-medium",children:["Total member: ",e.user_count]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"w-4 h-4 text-muted-foreground"}),t.jsxs("span",{className:"text-sm font-medium",children:["Total Permissions: ",e?.permission_count]})]})]}),t.jsxs(x.eW,{className:"flex gap-2",children:[t.jsxs(p.z,{variant:"outline",size:"sm",onClick:()=>M(e.id),className:"flex-1",children:[t.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"View"]}),t.jsxs(p.z,{variant:"destructive",size:"sm",onClick:()=>Z({name:e.name,id:e.id}),className:"flex-1",children:[t.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]},e.id))}),y?.length===0&&(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(l,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No groups found"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first group to get started"}),(0,t.jsxs)(p.z,{onClick:()=>j(!0),children:[t.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Create Group"]})]}),t.jsx(g.aR,{open:s,onOpenChange:r,children:(0,t.jsxs)(g._T,{children:[(0,t.jsxs)(g.fY,{children:[t.jsx(g.f$,{children:"Are you sure?"}),(0,t.jsxs)(g.yT,{children:["This action cannot be undone. This will permanently delete the group"," ",(0,t.jsxs)("span",{className:"font-semibold",children:['"',v?.name,'"']})," and remove all associated permissions."]})]}),(0,t.jsxs)(g.xo,{children:[t.jsx(g.le,{children:"Cancel"}),t.jsx(g.OL,{onClick:()=>{v&&k(v.id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Group"})]})]})}),t.jsx(f.Vq,{open:o,onOpenChange:j,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[500px]",children:[t.jsx(f.fK,{children:t.jsx(f.$N,{children:"Create A Group"})}),t.jsx(P,{onCancel:()=>j(!1)})]})})]})}},78062:(e,s,r)=>{"use strict";r.d(s,{Z:()=>o});var t=r(10326),a=r(17577),i=r(90220),n=r(51223);let o=a.forwardRef(({className:e,orientation:s="horizontal",decorative:r=!0,...a},o)=>t.jsx(i.f,{ref:o,decorative:r,orientation:s,className:(0,n.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...a}));o.displayName=i.f.displayName},74967:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`A:\peopleForTek\member management backend\Member-Management-Nextjs\src\app\(dashboard)\groups\page.tsx#default`)},90220:(e,s,r)=>{"use strict";r.d(s,{f:()=>d});var t=r(17577),a=r(45226),i=r(10326),n="horizontal",o=["horizontal","vertical"],l=t.forwardRef((e,s)=>{let{decorative:r,orientation:t=n,...l}=e,d=o.includes(t)?t:n;return(0,i.jsx)(a.WV.div,{"data-orientation":d,...r?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...l,ref:s})});l.displayName="Separator";var d=l}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[8948,2144,9314,5584,7134,3703,5917,2721,6738],()=>r(75217));module.exports=t})();